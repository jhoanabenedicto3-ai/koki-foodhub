services:
  - type: web
    name: koki-foodhub-app
    env: python
    branch: main
    plan: free
    buildCommand: pip install -r requirements.txt && python manage.py migrate && python manage.py loaddata export_products.json export_sales.json export_inventory.json 2>/dev/null; python manage.py import_sales_data && python manage.py collectstatic --noinput
    startCommand: gunicorn koki_foodhub.wsgi
    envVars:
      - key: DEBUG
        value: "False"
      - key: SECRET_KEY
        value: "@secret_key"
      - key: ALLOWED_HOSTS
        value: "*.onrender.com,localhost,127.0.0.1"
      - key: DATABASE_URL
        # When a Render-managed database is attached, Render exposes the connection
        # string as a service environment variable. Adjust the reference below if
        # your database resource name is different (example: kokifoodhub_db).
        value: "@koki-foodhub-db_DATABASE_URL"
databases:
  - name: koki-foodhub-db
    plan: starter
    region: oregon
